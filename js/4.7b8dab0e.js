(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{1396:function(e,t,o){},a7d4:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"controllers absolute fit flex items-stretch"},[o("div",{staticClass:"q-pa-xs fit column"},[o("q-toolbar",{staticClass:"col-auto row"},[o("q-tabs",{staticClass:"q-pa-xs ctrlr-cred-tabs",attrs:{"inline-label":"",value:e.tab,shrink:""}},[o("q-route-tab",{attrs:{label:"Controllers",icon:"fas fa-server",name:"controllers",to:{name:"controllers"}}}),o("q-route-tab",{attrs:{label:"Cloud Credentials",icon:"fas fa-address-card",name:"credentials",to:{name:"cloud-credentials"}}})],1),o("q-space"),o("q-btn",{attrs:{color:"positive",icon:"fas fa-plus"},on:{click:function(t){return e.startCreate()}}})],1),o("q-tab-panels",{staticStyle:{flex:"1 1 0%","background-color":"hsla(0, 0%, 0%, 0)"},attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[o("q-tab-panel",{staticClass:"row content-start q-col-gutter-sm",attrs:{name:"controllers","transition-next":"tab-trans","transition-prev":"tab-trans"}},[o("div",{staticClass:"text-h5 ctrl-cred-tabs-alt-heading col-12 q-mb-sm q-ml-xs"},[e._v("\n          Controllers\n        ")]),e._l(e.controllers,(function(t){return o("div",{key:t.name,staticClass:"col-12 col-sm-6 col-md-4"},[o("resource-card",{attrs:{heading:t.name,headingIcon:"fas fa-server",infoItems:[{label:e.controllersCloud(t),icon:"cloud"},{label:e.controllersCredential(t),icon:"fas fa-address-card"},{label:t.accessLevel,icon:"person"}],loading:e.loadingControllers[t.id]},on:{delete:function(o){return e.deleteController(t)},edit:function(o){return e.startEditController(t)}}})],1)}))],2),o("q-tab-panel",{staticClass:"row content-start q-col-gutter-sm",attrs:{name:"credentials"}},[o("div",{staticClass:"text-h5 ctrl-cred-tabs-alt-heading col-12 q-mb-sm q-ml-xs"},[e._v("\n          Cloud Credentials\n        ")]),e._l(e.cloudCredentials,(function(t){return o("div",{key:t.name,staticClass:"col-12 col-sm-6 col-md-4"},[o("resource-card",{attrs:{heading:t.name,headingIcon:"fas fa-address-card",infoItems:[{label:e.credentialsCloud(t),icon:"cloud"}],loading:e.loadingCredentials[t.id]},on:{delete:function(o){return e.deleteCredential(t)},edit:function(o){return e.startEditCredential(t)}}})],1)}))],2)],1)],1),o("juju-loading",{attrs:{loading:e.loading}})],1)},n=[],l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-card",[o("q-card-section",[o("div",{staticClass:"row items-center"},[o("div",{staticClass:"col-grow",staticStyle:{flex:"1 1 0%"}},[o("div",{staticClass:"text-h6"},[o("q-icon",{staticClass:"on-left",attrs:{name:e.headingIcon}}),e._v("\n          "+e._s(e.heading)+"\n        ")],1),o("div",{staticClass:"text-subtitle2 row"},e._l(e.infoItems,(function(t,i){return o("div",{key:i,staticClass:"q-mr-sm"},[o("q-icon",{staticClass:"q-ma-xs",attrs:{name:t.icon,size:"1em"}}),e._v("\n            "+e._s(t.label)+"\n          ")],1)})),0)]),o("div",{staticClass:"col-auto"},[o("q-btn",{attrs:{flat:"",round:"",icon:"more_vert"}},[o("q-menu",{staticStyle:{"font-size":"1em"},attrs:{anchor:"center right",self:"center left",offset:[10,0]}},[o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-primary text-white",attrs:{clickable:""},on:{click:function(t){return e.$emit("edit")}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"edit"}})],1),o("q-item-section",[e._v("Edit")])],1),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"bg-negative text-white",attrs:{clickable:""},on:{click:function(t){return e.$emit("delete")}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"delete"}})],1),o("q-item-section",[e._v("Delete")])],1)],1)],1)],1)])]),e.showContentSection?o("q-separator"):e._e(),e.showContentSection?o("q-card-section",[e._t("default")],2):e._e(),o("juju-loading",{attrs:{loading:e.loading}})],1)},a=[],r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-inner-loading",{attrs:{showing:e.showLoading}},[o("q-spinner-rings",{attrs:{size:"80%",color:e.$q.dark.isActive?"secondary":"primary"}})],1)},s=[],d=o("fe09"),c=o("60a3"),u=function(e,t,o,i){var n,l=arguments.length,a=l<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(l<3?n(a):l>3?n(t,o,a):n(t,o))||a);return l>3&&a&&Object.defineProperty(t,o,a),a};let p=class extends c["d"]{constructor(){super(...arguments),this.showLoading=!1,this.showLoadingTimeoutHandle=null}created(){this.onLoadingChange(this.loading)}onLoadingChange(e){e||(this.showLoading=!1),!e&&this.showLoadingTimeoutHandle?clearTimeout(this.showLoadingTimeoutHandle):e&&!this.showLoadingTimeoutHandle&&(this.showLoadingTimeoutHandle=setTimeout(()=>this.showLoading=!0,this.delay))}};u([Object(c["c"])(Boolean)],p.prototype,"loading",void 0),u([Object(c["c"])({type:Number,default:300})],p.prototype,"delay",void 0),u([Object(c["e"])("loading")],p.prototype,"onLoadingChange",null),p=u([Object(c["a"])({components:{QInnerLoading:d["b"],QSpinnerRings:d["c"]}})],p);var h=p,f=h,g=o("2877"),m=o("eebe"),C=o.n(m),b=o("74f7"),v=o("792f"),y=Object(g["a"])(f,r,s,!1,null,null,null),q=y.exports;C()(y,"components",{QInnerLoading:b["a"],QSpinnerRings:v["a"]});var j=function(e,t,o,i){var n,l=arguments.length,a=l<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(l<3?n(a):l>3?n(t,o,a):n(t,o))||a);return l>3&&a&&Object.defineProperty(t,o,a),a};let $=class extends c["d"]{};j([Object(c["c"])({type:String,default:""})],$.prototype,"heading",void 0),j([Object(c["c"])({type:String,default:null})],$.prototype,"headingIcon",void 0),j([Object(c["c"])({type:Array,default:[]})],$.prototype,"infoItems",void 0),j([Object(c["c"])({type:Boolean,default:!1})],$.prototype,"loading",void 0),j([Object(c["c"])({type:Boolean,default:!1})],$.prototype,"showContentSection",void 0),$=j([Object(c["a"])({components:{JujuLoading:q}})],$);var w=$,k=w,O=o("f09f"),_=o("a370"),x=o("0016"),Q=o("9c40"),S=o("4e73"),D=o("66e5"),I=o("4074"),R=o("eb85"),L=o("7f67"),A=Object(g["a"])(k,l,a,!1,null,null,null),P=A.exports;C()(A,"components",{QCard:O["a"],QCardSection:_["a"],QIcon:x["a"],QBtn:Q["a"],QMenu:S["a"],QItem:D["a"],QItemSection:I["a"],QSeparator:R["a"]}),C()(A,"directives",{ClosePopup:L["a"]});var T=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-dialog",{ref:"dialog",attrs:{persistent:""},on:{hide:e.onDialogHide}},[o("q-card",{staticClass:"q-dialog-plugin"},[o("q-card-section",[o("div",{staticClass:"text-h5 q-mb-sm flex items-center"},[e.editing?o("q-icon",{staticClass:"on-left",attrs:{name:"edit"}}):e._e(),e.editing?o("span",[e._v("Edit")]):e._e(),e.editing?e._e():o("q-icon",{staticClass:"on-left",attrs:{name:"fas fa-plus"}}),e.editing?e._e():o("span",[e._v("Create")]),o("span",[e._v(" Controller")])],1),e.editing?e._e():o("p",[e._v("Deploy a new controller to a supported cloud.")]),o("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[o("q-input",{attrs:{label:"Controller name",color:e.inputColor,rules:[function(e){return!!e||"Field is required"}],"lazy-rules":""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),o("div",{staticClass:"row"},[o("q-select",{staticClass:"col q-pr-xs",attrs:{label:"Cloud","option-label":"name",options:e.clouds,color:e.inputColor,disable:e.editing,rules:[function(e){return!!e||"Field is required"}],"lazy-rules":""},model:{value:e.cloud,callback:function(t){e.cloud=t},expression:"cloud"}}),o("q-select",{staticClass:"col",attrs:{label:"Region","option-label":"name",disable:!e.cloud||e.editing,options:e.cloud?e.cloud.availableRegions:[],color:e.inputColor,rules:[function(e){return!!e||"Field is required"}],"lazy-rules":""},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}})],1),o("q-select",{attrs:{label:"Cloud Credential","option-label":"name",disable:!e.cloud||e.editing,options:e.cloud?e.cloudCredentials.filter((function(t){return t.cloudId==e.cloud.id})):[],color:e.inputColor,rules:[function(e){return!!e||"Field is required"}],"lazy-rules":""},model:{value:e.cloudCredential,callback:function(t){e.cloudCredential=t},expression:"cloudCredential"}}),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{attrs:{color:"positive",type:"submit",label:e.controller?"Update":"Create",icon:e.editing?"check":"fas fa-plus",loading:e.loading}}),o("q-btn",{attrs:{color:"primary",icon:"cancel",label:"Cancel"},on:{click:e.onCancelClick}})],1)],1)],1)],1)],1)},E=[],F=o("cf2e"),z=o("b2da"),H=o("4bb5"),B=function(e,t,o,i){var n,l=arguments.length,a=l<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(l<3?n(a):l>3?n(t,o,a):n(t,o))||a);return l>3&&a&&Object.defineProperty(t,o,a),a};const J=Object(H["a"])("juju");let N=class extends c["d"]{constructor(){super(...arguments),this.loading=!1,this.name=null,this.cloud=null,this.region=null,this.cloudCredential=null}get inputColor(){return this.$q.dark.isActive?"secondary":"primary"}get editing(){return null!=this.controller}show(){this.controller&&(this.name=this.controller.name,this.cloud=this.clouds.filter(e=>e.id==this.controller.cloudId)[0],this.region=this.controller.region,this.cloudCredential=this.cloudCredentials.filter(e=>e.id==this.controller.cloudCredentialId)[0]),this.$refs.dialog.show()}hide(){this.$refs.dialog.hide()}onDialogHide(){this.$emit("hide")}onSubmit(){if(this.editing){const e={name:this.name,id:this.controller.id,cloudId:this.cloud.id,accessLevel:this.controller.accessLevel,region:this.region,cloudCredentialId:this.cloudCredential.id};this.loading=!0,this.updateController(e).then(()=>{this.$emit("ok",e),this.hide(),this.loading=!1,this.$q.notify({type:"positive",message:`Seccessfully created controller: ${e.name}.`,position:"bottom-right",timeout:2e3})})}else{const e={name:this.name,id:Object(d["e"])(),cloudId:this.cloud.id,accessLevel:"admin",region:this.region,cloudCredentialId:this.cloudCredential.id};this.loading=!0,this.addController(e).then(()=>{this.$emit("ok",e),this.hide(),this.loading=!1,this.setCurrentController(e),this.$q.notify({type:"positive",message:`Seccessfully created controller: ${e.name}.`,position:"bottom-right",timeout:2e3})})}}onCancelClick(){this.hide()}};B([Object(c["c"])({type:Object,default:null})],N.prototype,"controller",void 0),B([J.State],N.prototype,"clouds",void 0),B([J.State],N.prototype,"cloudCredentials",void 0),B([J.Mutation(F["b"].setCurrentController)],N.prototype,"setCurrentController",void 0),B([J.Action(z["a"].addController)],N.prototype,"addController",void 0),B([J.Action(z["a"].updateController)],N.prototype,"updateController",void 0),N=B([c["a"]],N);var M=N,U=M,G=o("24e8"),K=o("0378"),V=o("27f9"),W=o("ddd8"),X=o("4b7e"),Y=Object(g["a"])(U,T,E,!1,null,null,null),Z=Y.exports;C()(Y,"components",{QDialog:G["a"],QCard:O["a"],QCardSection:_["a"],QIcon:x["a"],QForm:K["a"],QInput:V["a"],QSelect:W["a"],QCardActions:X["a"],QBtn:Q["a"]});var ee=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-dialog",{ref:"dialog",attrs:{persistent:""},on:{hide:e.onDialogHide}},[o("q-card",{staticClass:"q-dialog-plugin"},[o("q-card-section",[o("div",{staticClass:"text-h5 q-mb-sm flex items-center"},[e.editing?o("q-icon",{staticClass:"on-left",attrs:{name:"edit"}}):e._e(),e.editing?o("span",[e._v("Edit")]):e._e(),e.editing?e._e():o("q-icon",{staticClass:"on-left",attrs:{name:"fas fa-plus"}}),e.editing?e._e():o("span",[e._v("Create")]),o("span",[e._v(" Cloud Credential")])],1),e.editing?e._e():o("p",[e._v("Add a new cloud credential.")]),o("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[o("q-input",{attrs:{label:"Credential name",color:e.inputColor,rules:[function(e){return!!e||"Field is required"}]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),o("q-select",{attrs:{label:"Cloud","option-label":"name",options:e.clouds,color:e.inputColor,disable:e.editing,rules:[function(e){return!!e||"Field is required"}],"lazy-rules":""},model:{value:e.cloud,callback:function(t){e.cloud=t},expression:"cloud"}}),e._l(e.cloud?e.cloud.requiredCredentials:[],(function(t){return o("q-input",{key:t.key,ref:"credentialData",refInFor:!0,attrs:{value:e.credentialData[t.key]?e.credentialData[t.key]:"",label:t.label,color:e.inputColor,rules:[function(t){return!(e.credentialsRequired&&!t)||"Field is required"}],type:t.isPassword?"password":"text",hint:t.description,"lazy-rules":""},on:{input:function(o){return e.$set(e.credentialData,t.key,o)}}})})),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{attrs:{color:"positive",type:"submit",label:e.editing?"Update":"Create",icon:e.editing?"check":"fas fa-plus",loading:e.loading}}),o("q-btn",{attrs:{color:"primary",icon:"cancel",label:"Cancel"},on:{click:e.onCancelClick}})],1)],2)],1)],1)],1)},te=[],oe=function(e,t,o,i){var n,l=arguments.length,a=l<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(l<3?n(a):l>3?n(t,o,a):n(t,o))||a);return l>3&&a&&Object.defineProperty(t,o,a),a};const ie=Object(H["a"])("juju");let ne=class extends c["d"]{constructor(){super(...arguments),this.loading=!1,this.name=null,this.cloud=null,this.credentialData={}}get inputColor(){return this.$q.dark.isActive?"secondary":"primary"}get editing(){return null!=this.credential}onCloudChange(){this.credentialData={}}get credentialsRequired(){return!(this.editing&&0==Object.keys(this.credentialData).filter(e=>!(this.credentialData[e]in["",null,void 0])).length)}show(){this.credential&&(this.name=this.credential.name,this.cloud=this.clouds.filter(e=>e.id==this.credential.cloudId)[0]),this.$refs.dialog.show()}hide(){this.$refs.dialog.hide()}onDialogHide(){this.$emit("hide")}onSubmit(){if(this.editing){const e={name:this.name,id:this.credential.id,cloudId:this.credential.cloudId,credentialData:this.credentialsRequired?this.credentialData:this.credential.credentialData};this.loading=!0,this.updateCloudCredential(e).then(()=>{this.$emit("ok",e),this.hide(),this.loading=!1,this.$q.notify({type:"positive",message:`Seccessfully updated credential: ${e.name}.`,position:"bottom-right",timeout:2e3})})}else{const e={name:this.name,id:Object(d["e"])(),cloudId:this.cloud.id,credentialData:this.credentialData};this.loading=!0,this.addCloudCredential(e).then(()=>{this.$emit("ok",e),this.hide(),this.loading=!1,this.$q.notify({type:"positive",message:`Seccessfully created credential: ${e.name}.`,position:"bottom-right",timeout:2e3})})}}onCancelClick(){this.hide()}};oe([Object(c["c"])({type:Object,default:null})],ne.prototype,"credential",void 0),oe([ie.State],ne.prototype,"clouds",void 0),oe([ie.State],ne.prototype,"cloudCredentials",void 0),oe([ie.Action(z["a"].addCloudCredential)],ne.prototype,"addCloudCredential",void 0),oe([ie.Action(z["a"].updateCloudCredential)],ne.prototype,"updateCloudCredential",void 0),oe([Object(c["e"])("cloud")],ne.prototype,"onCloudChange",null),ne=oe([c["a"]],ne);var le=ne,ae=le,re=Object(g["a"])(ae,ee,te,!1,null,null,null),se=re.exports;C()(re,"components",{QDialog:G["a"],QCard:O["a"],QCardSection:_["a"],QIcon:x["a"],QForm:K["a"],QInput:V["a"],QSelect:W["a"],QCardActions:X["a"],QBtn:Q["a"]});var de=function(e,t,o,i){var n,l=arguments.length,a=l<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(l<3?n(a):l>3?n(t,o,a):n(t,o))||a);return l>3&&a&&Object.defineProperty(t,o,a),a};const ce=Object(H["a"])("juju");let ue=class extends c["d"]{constructor(){super(...arguments),this.loading=!1,this.loadingControllers={},this.loadingCredentials={}}get tab(){return"controllers"==this.$route.name?"controllers":"credentials"}created(){this.fetchData()}fetchData(){this.loading=!0,Promise.all([this.loadControllers(),this.loadCloudCredentials(),this.loadCloudList()]).then(()=>{this.loading=!1})}startCreate(){"controllers"==this.tab?this.$q.dialog({component:Z,parent:this}):"credentials"==this.tab&&this.$q.dialog({component:se,parent:this})}startEditController(e){this.$q.dialog({component:Z,parent:this,controller:e})}startEditCredential(e){this.$q.dialog({component:se,parent:this,credential:e})}deleteController(e){this.$q.dialog({title:"Are you sure?",message:`Are you sure you want to delete controller ${e.name}?`,persistent:!0,cancel:!0,ok:{label:"delete",color:"negative"}}).onOk(()=>{this.$set(this.loadingControllers,e.id,!0),this.runDeleteController(e.id).then(()=>{this.$set(this.loadingControllers,e.id,!1),this.$q.notify({type:"positive",message:`Seccessfully deleted controller: ${e.name}.`,position:"bottom-right",timeout:2e3})})})}deleteCredential(e){this.$q.dialog({title:"Are you sure?",message:`Are you sure you want to delete credential ${e.name}?`,persistent:!0,cancel:!0,ok:{label:"delete",color:"negative"}}).onOk(()=>{this.$set(this.loadingCredentials,e.id,!0),this.runDeleteCredential(e.id).then(()=>{this.$set(this.loadingCredentials,e.id,!1),this.$q.notify({type:"positive",message:`Seccessfully deleted credential: ${e.name}.`,position:"bottom-right",timeout:2e3})})})}credentialsCloud(e){const t=this.clouds.filter(t=>t.id==e.cloudId);return t[0]?t[0].name:""}controllersCredential(e){const t=this.cloudCredentials.filter(t=>t.id==e.cloudCredentialId);return t[0]?t[0].name:""}controllersCloud(e){const t=this.clouds.filter(t=>t.id==e.cloudId);return t[0]?t[0].name:""}};de([ce.State],ue.prototype,"controllers",void 0),de([ce.State],ue.prototype,"cloudCredentials",void 0),de([ce.State],ue.prototype,"clouds",void 0),de([ce.Action(z["a"].loadControllers)],ue.prototype,"loadControllers",void 0),de([ce.Action(z["a"].loadCloudCredentials)],ue.prototype,"loadCloudCredentials",void 0),de([ce.Action(z["a"].loadCloudList)],ue.prototype,"loadCloudList",void 0),de([ce.Action(z["a"].deleteController)],ue.prototype,"runDeleteController",void 0),de([ce.Action(z["a"].deleteCloudCredential)],ue.prototype,"runDeleteCredential",void 0),ue=de([Object(c["a"])({components:{JujuLoading:q,ResourceCard:P}})],ue);var pe=ue,he=pe,fe=(o("fb71"),o("65c6")),ge=o("429b"),me=o("7867"),Ce=o("2c91"),be=o("adad"),ve=o("823b"),ye=o("7460"),qe=Object(g["a"])(he,i,n,!1,null,null,null);t["default"]=qe.exports;C()(qe,"components",{QToolbar:fe["a"],QTabs:ge["a"],QRouteTab:me["a"],QSpace:Ce["a"],QBtn:Q["a"],QTabPanels:be["a"],QTabPanel:ve["a"],QTab:ye["a"]})},fb71:function(e,t,o){"use strict";var i=o("1396"),n=o.n(i);n.a}}]);